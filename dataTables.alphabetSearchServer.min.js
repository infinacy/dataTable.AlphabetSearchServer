!function(o){function l(a,e,t){if(t.json&&t.json.alphabetSearchData){e.empty(),""!==t.oLanguage.alphabetSearch.infoDisplay&&o('<span class="alphabet-info-display"></span>').html(t.oLanguage.alphabetSearch.infoDisplay).appendTo(e);var a=a.column(t.alphabetSearch.column,{search:"applied"}).data(),r=t.json.alphabetSearchData,n=o("<ul/>");o("<a/>").attr("href","javascript:;").data("letter","").data("match-count",a.length).addClass(t.alphabetSearch.letter?"":"active").html("<span>"+t.oLanguage.alphabetSearch.infoAll+"</span>").wrap("<li/>").parent().appendTo(n);for(var l=0;l<t.oLanguage.alphabetSearch.alphabet.length;l++){var h=t.oLanguage.alphabetSearch.alphabet[l];o("<a/>").attr("href","javascript:;").data("letter",h).data("match-count",r[h]||0).addClass((r[h]?"":"empty")+(t.alphabetSearch.letter===h?" active":"")).html("<span>"+h+"</span>").wrap("<li/>").parent().appendTo(n)}n.appendTo(e),o('<div class="alphabet-info"></div>').appendTo(e)}}o.fn.dataTable.Api.register("alphabetSearchServer()",function(r){return this.iterator("table",function(a){var t;a.alphabetSearch.letter=r,void 0===a.ajax.data?a.ajax.data={alphabetSearchLetter:r}:"function"==typeof a.ajax.data?(t=a.ajax.data,a.ajax.data=function(a,e){e=t(a,e);return e&&(a=e),a.alphabetSearchLetter=r,a}):"object"==typeof a.ajax.data&&(a.ajax.data.alphabetSearchLetter=r)}),this}),o.fn.dataTable.Api.register("alphabetSearchServer.recalc()",function(){return this.iterator("table",function(a){l(new o.fn.dataTable.Api(a),o("div.alphabet",this.table().container()),a)}),this}),o.fn.dataTable.AlphabetSearchServer=function(t){var r,e=new o.fn.dataTable.Api(t),n=o('<div class="alphabet"/>');t.oLanguage.alphabetSearch=o.extend({alphabet:"#ABCDEFGHIJKLMNOPQRSTUVWXYZ",infoDisplay:"Display:",infoAll:"All"},t.oLanguage.alphabetSearch||{}),t.oLanguage.alphabetSearch.alphabet.toUpperCase(),t.alphabetSearch=o.extend({column:0},o.isPlainObject(t.oInit.alphabetSearch)?t.oInit.alphabetSearch:{},{letter:"",letterSearch:"",pass:0}),0<=t.alphabetSearch.column&&t.alphabetSearch.column<t.aoColumns.length&&(t.aoColumns[t.alphabetSearch.column].sSortDataType="alphabetSearch"),void 0===t.ajax.data?t.ajax.data={alphabetSearchColumn:t.alphabetSearch.column}:"function"==typeof t.ajax.data?(r=t.ajax.data,t.ajax.data=function(a,e){e=r(a,e);return e&&(a=e),a.alphabetSearchColumn=t.alphabetSearch.column,a}):"object"==typeof t.ajax.data&&(t.ajax.data.alphabetSearchColumn=t.alphabetSearch.column),t.hasOwnProperty("aaSortingFixed")&&"object"==typeof t.aaSortingFixed?o.isArray(t.aaSortingFixed)?t.aaSortingFixed.length&&!o.isArray(t.aaSortingFixed[0])?t.aaSortingFixed=[[t.alphabetSearch.column,"asc"],t.aaSortingFixed]:t.aaSortingFixed.unshift([t.alphabetSearch.column,"asc"]):(t.aaSortingFixed.hasOwnProperty("pre")||(t.aaSortingFixed.pre=[]),t.aaSortingFixed.pre.length&&!o.isArray(t.aaSortingFixed.pre[0])?t.aaSortingFixed.pre=[[t.alphabetSearch.column,"asc"],t.aaSortingFixed.pre]:t.aaSortingFixed.pre.unshift([t.alphabetSearch.column,"asc"])):t.aaSortingFixed=[t.alphabetSearch.column,"asc"],l(e,n,t),n.on("click","a",function(a){a.preventDefault(),n.find(".active").removeClass("active"),o(this).addClass("active"),e.alphabetSearchServer(o(this).data("letter")).draw()}),n.on("mouseenter","a",function(){var a=o(this),e=a.position(),t=o(".alphabet-info",n);t.html(a.data("match-count")),t.css({opacity:1,left:e.left+Math.round((a.outerWidth()-t.outerWidth())/2),top:o(this).position().top+a.outerHeight()})}).on("mouseleave","a",function(){n.find("div.alphabet-info").css("opacity",0)}),e.on("draw.dt.dtAlphabetSearch",function(a,e){var t=new o.fn.dataTable.Api(e);t.alphabetSearchServer.recalc();var r=t.columns().nodes().length,n=t.rows({page:"current"}).nodes(),l=null;t.column(e.alphabetSearch.column,{page:"current"}).data().each(function(a,e){a&&(a=a.toString().replace(/<.*?>/g,"").charAt(0).toUpperCase(),l!==a&&(o(n).eq(e).before('<tr class="alphabet-group"><td colspan="'+r+'">'+a+"</td></tr>"),l=a))}),!n.length&&e.alphabetSearch&&(e=e.alphabetSearch.letter,o(t.table().body()).prepend('<tr class="alphabet-group"><td colspan="'+r+'">'+e+"</td></tr>"))}),e.on("destroy.dt.dtAlphabetSearch",function(a,e){new o.fn.dataTable.Api(e).off(".dtAlphabetSearch")}),this.node=function(){return n}},o.fn.DataTable.AlphabetSearchServer=o.fn.dataTable.AlphabetSearchServer,o.fn.dataTable.ext.feature.push({fnInit:function(a){return new o.fn.dataTable.AlphabetSearchServer(a).node()},cFeature:"S"})}(jQuery);